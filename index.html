<!DOCTYPE html>
<html>

<head>
    <title>North Canterbury Chess</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript" src="js/NCCscript.js"></script>
</head>

<body>

    <header>
        <div class="header-brand">
            <img src="Images/logo.png" alt="North Canterbury Chess Logo" class="header-logo">
            <h1><a href="http://northcanterburychess.nz/">North Canterbury Chess</a></h1>
        </div>
        <h4>Supporting chess in North Canterbury, New Zealand</h4>
        <nav>
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="about.html"><i class="fas fa-info-circle"></i> About Us</a></li>
                <li><a href="results.html"><i class="fas fa-trophy"></i> Results</a></li>
                <li><a href="ratings.html"><i class="fas fa-chart-line"></i> Ratings</a></li>
                <li><a href="about.html#download"><i class="fas fa-download"></i> Downloads</a></li>
                <li><a href="about.html#contact"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content">
        <div class="content-area">

            <h1>Quote of the day</h1>
            <div class="quoteOfTheDay">
                <script type="text/javascript">Show_Quote()</script>
            </div>

            <h1>Events</h1>
            <p>NCC normally meets on the first and third Tuesday of each month.</p>

            <div class="calendar-container">
                <div class="calendar-header">
                    <h2>April 2025</h2>
                    <div class="calendar-controls">
                        <button class="calendar-control-button" id="prev-month">❮</button>
                        <button class="calendar-control-button" id="next-month">❯</button>
                    </div>
                </div>
                <table class="calendar"></table>
            </div>
            <p>Click on the highlighted date to see more information about the scheduled event.</p>

            <!-- Event Popup -->
            <div class="event-popup-backdrop"></div>
            <div class="event-popup">
                <button class="event-popup-close">&times;</button>
                <div class="event-popup-date"></div>
                <div class="event-popup-content"></div>
            </div>

            <h1>Posts</h1>

            <article id="article1" class="article">
                <h2>End of Year Blitz 2025</h2>
                <p class="post-date">Posted on: 20 Dec 2025</p>
                <h4>Winner: Bob van den Bergh & Scott Stringer (7.0/8)</h4>
                <p>Our year ending tournament was the annual End-Of-Year-Blitz. The competition was played as a round
                    robin over 8 rounds.
                    Games were played at 5 minutes per player per game.</p>
                <p>Congratulations to Scott Stringer &amp; Bob van den Bergh for winning the competition.
                    </p>
                <p>Former Junior Champion Nathan Houghton returned to the Club for this competition. Welcome back Nathan!</p>
                <p>Full Results &raquo; <a href="results.html#EYBlitz">2025 End of Year Blitz&#8230;</a></p>
            </article>


            <article id="article2" class="article">
                <h2>Club Ladder 2025</h2>
                <p class="post-date">Posted on: 14 Nov 2025</p>
                <h4>Ladies &amp; Gentlemen we have a pair of Club Champions: Bob van den Bergh & Scott Stringer</h4>
                <p>Sadly, Akash Patel did not defend his 2024 title this year, leaving the title open.
                    In the final, Scott and Bob fought for more than three hours over two nights.
                    In the final position Scott has an extra pawn, but Bob has a dangerous passed a-pawn.
                    Scott forced a draw by repetitive check on move 50 (The R repeats moves ....Rg2+....Rh2+).</p>
                <img src="Images/2025 final position.jpg" alt="Club Championship final position" class="article-image">
                <p class="caption">The final position</p>

                <p>Full Results &raquo; <a href="results.html#NCCChamps">2025 Club Ladder…</a></p>
            </article>

            <article id="article4" class="article">
                <h2>Midwinter Blitz 2025</h2>
                <p class="post-date">Posted on: 5 Jul 2025</p>
                <h4>Winner: Scott Stringer (6/6)</h4>
                <p>Seven players competed in this year's Midwinter Blitz competition.
                    Six rounds were played with games timed at five minutes-per-player-per-game.</p>
                <p>Newcomers Tristran and Bella earned their first provisional Blitz rating and Daniel converted his
                    provisional rating to a full NCC Blitz rating.</p>
                <p>Congratulations to Scott for winning overall.</p>
                <p>Full Results &raquo; <a href="results.html#MWBlitz">2025 Midwinter Blitz...</a></p>
            </article>



            <article id="article3" class="article">
                <h2>King's Gambit 2024</h2>
                <p class="post-date">Posted on: 26 Nov 2024</p>
                <h4>Winner: Bob van den Bergh (5/5)</h4>
                <p>
                <p>This is an extended competition, played over two consecutive nights.</p>
                <p>Bob van den Bergh was the clear winner on a perfect 5/5. He and Akash fought out a
                    difficult and instructive pawn endgame to conclude the final game.</p>
                <p>Full Results &raquo; <a href="results.html#KingGambit">2024 King's Gambit…</a></p>
            </article>
        </div>
        <div class="right-sidebar">
            <ul>
                <li>
                    <h3>Recent Posts</h3>
                    <ul>
                        <li><a href="#article1">2025 End of Year Blitz - results</a></li>
                        <li><a href="#article2">2025 Club Ladder - results</a></li>
                        <li><a href="#article4">2025 Midwinter Blitz - results</a></li>
                        <li><a href="#article3">2024 King's Gambit - results</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 North Canterbury Chess. All rights reserved.</p>
    </footer>

    <script>
        const calendarContainer = document.querySelector('.calendar-container');
        const monthHeader = calendarContainer.querySelector('.calendar-header h2');
        const calendarTable = calendarContainer.querySelector('.calendar');
        const prevMonthButton = calendarContainer.querySelector('#prev-month');
        const nextMonthButton = calendarContainer.querySelector('#next-month');

        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        const monthNames = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"];

        // Array of events
        const events = [
            { date: '2026-01-06', title: 'NO MEETING' },
            { date: '2026-01-20', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-02-03', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-02-17', title: 'Club Ladder #1 (of 6)' },
            { date: '2026-03-03', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-03-17', title: 'Club Ladder #2 (of 6)' },
            { date: '2026-04-07', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-04-21', title: 'AGM / Free play', body: 'The club Annual General Meeting to elect officers and change the constitution.' },
            { date: '2026-05-05', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-05-19', title: 'Club Ladder #3 (of 6)' },
            { date: '2026-06-02', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-06-16', title: 'Club Ladder #4 (of 6)' },
            { date: '2026-07-07', title: 'Midwinter Blitz', body: 'Played with clocks. Games are timed at 5 minutes per player per game.' },
            { date: '2026-07-21', title: 'Club Ladder #5 (of 6)' },
            { date: '2026-08-04', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-08-18', title: 'Club Ladder #6 (of 6)' },
            { date: '2026-09-01', title: 'Free play / Club Ladder semi-finals', body: 'Club Ladder semi-finals' },
            { date: '2026-09-15', title: 'Free play / Club Ladder semi-finals', body: 'Club Ladder semi-finals' },
            { date: '2026-10-06', title: 'Free play / Club Ladder Final', body: 'Club Ladder Final' },
            { date: '2026-10-20', title: 'Free play / Club Ladder Final', body: 'Club Ladder Final' },
            { date: '2026-11-03', title: 'Kings Gambit #1 (of 2)', body: 'A round-robin with all games starting from a set opening position' },
            { date: '2026-11-17', title: 'Kings Gambit #2 (of 2)', body: 'A round-robin with all games starting from a set opening position' },
            { date: '2026-12-01', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2026-12-15', title: 'End of Year Blitz', body: 'Played with clocks. Games are timed at 5 minutes per player per game.' },
            { date: '2027-01-05', title: 'NO MEETING' },
            { date: '2027-01-19', title: 'Free play', body: 'There is no scheduled competition.' },
            { date: '2027-02-02', title: 'Free play', body: 'There is no scheduled competition.' }
        ];

        // Centralize popup handling
        const popup = {
            show: (dateStr, events) => {
                const popup = document.querySelector('.event-popup');
                const backdrop = document.querySelector('.event-popup-backdrop');
                const dateEl = popup.querySelector('.event-popup-date');
                const contentEl = popup.querySelector('.event-popup-content');

                const formattedDate = new Date(dateStr).toLocaleDateString('en-NZ', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                dateEl.textContent = formattedDate;
                contentEl.innerHTML = events.map(e => `
                    <p>${e.title}</p>
                    ${e.body ? `<p class="event-body">${e.body}</p>` : ''}
                `).join('');

                popup.style.display = 'block';
                backdrop.style.display = 'block';
            },
            hide: () => {
                document.querySelector('.event-popup').style.display = 'none';
                document.querySelector('.event-popup-backdrop').style.display = 'none';
            }
        };

        // Add event handlers only once
        document.querySelector('.event-popup-close')?.addEventListener('click', popup.hide);
        document.querySelector('.event-popup-backdrop')?.addEventListener('click', popup.hide);

        function createCalendar(month, year, events) {
            calendarTable.innerHTML = `
                <thead>
                    <tr>
                        <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            `;
            monthHeader.textContent = `${monthNames[month]} ${year}`;

            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            const todayDate = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;


            let dayCounter = 1;
            let tableBody = calendarTable.querySelector('tbody');

            for (let i = 0; i < 6; i++) { // Max 6 rows
                let row = tableBody.insertRow();
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDayOfMonth) {
                        row.insertCell().textContent = '';
                    } else if (dayCounter <= daysInMonth) {
                        const cell = row.insertCell();
                        cell.textContent = dayCounter;

                        // Add weekend class
                        if (j === 0 || j === 6) {
                            cell.classList.add('weekend');
                        }

                        // Add events for the current day
                        const eventDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(dayCounter).padStart(2, '0')}`;
                        const dayEvents = events.filter(event => event.date === eventDate);
                        if (dayEvents.length > 0) {
                            cell.classList.add('event-day');
                            cell.title = dayEvents.map(e => e.title).join('\n');
                            cell.addEventListener('click', () => popup.show(eventDate, dayEvents));
                        }

                        if (eventDate === todayDate) {
                            cell.classList.add('today');
                            cell.title = "Today";
                        }

                        dayCounter++;
                    } else {
                        row.insertCell().textContent = '';
                    }
                }
                if (dayCounter > daysInMonth) break;
            }
        }

        prevMonthButton.addEventListener('click', () => {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            createCalendar(currentMonth, currentYear, events);
        });

        nextMonthButton.addEventListener('click', () => {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            createCalendar(currentMonth, currentYear, events);
        });

        createCalendar(currentMonth, currentYear, events); // Initial render

    </script>
</body>

</html>